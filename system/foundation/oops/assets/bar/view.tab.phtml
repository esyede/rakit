<?php

namespace System\Foundation\Oops;

defined('DS') or exit('No direct access.');

use System\View;

$viewCount = isset($this->data['views']) ? count($this->data['views']) : 0;
$totalTime = 0;

if (isset($this->data['views'])) {
    foreach ($this->data['views'] as $view) {
        $totalTime += isset($view['time']) ? $view['time'] : 0;
    }
}
?>
<span title="Views">
    <svg version="1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" enable-background="new 0 0 48 48">
        <g fill="#9C27B0">
            <path d="M38,8H10C8.9,8,8,8.9,8,10v28c0,1.1,0.9,2,2,2h28c1.1,0,2-0.9,2-2V10C40,8.9,39.1,8,38,8z"/>
        </g>
        <g fill="#FFF">
            <rect x="14" y="14" width="10" height="2"/>
            <rect x="14" y="18" width="20" height="2"/>
            <rect x="14" y="22" width="20" height="2"/>
            <rect x="14" y="26" width="15" height="2"/>
            <rect x="14" y="30" width="18" height="2"/>
        </g>
    </svg>
    <span class="oops-label">
        <?php echo $viewCount; ?> view<?php echo $viewCount !== 1 ? 's' : ''; ?>
        <?php if ($totalTime > 0) : ?>
            <span style="color: #999; font-size: 10px; margin-left: 3px;">
                (<?php echo number_format($totalTime * 1000, 2); ?>ms)
            </span>
        <?php endif; ?>
    </span>
</span>